$(function(){var f=function(){return b(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0)};var h=function(){return b(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)};var e=function(){return b(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)};var d=function(){return b(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)};var b=function(l,j,i){var k=l?l:0;if(j&&(!k||(k>j))){k=j}return i&&(!k||(k>i))?i:k};var c=function(){var i=$("html, body").height();return{height:i,slider_height:h(),slider_pos:d()}};var a=function(){var i=$("article").data("buffer-id");var k=$("article").data("timestamp");var j={buffer_id:i,timestamp:k};$.ajax({type:"POST",url:"/api/query",data:JSON.stringify(j),dataType:"json",contentType:"application/json; charset=utf-8",success:function(o){if(o&&(o.html_part!==null)){var m=c();document.title=o.filename+"â€”"+o.dirname;$("article").data("timestamp",o.timestamp);$("article").html(o.html_part);var n=Math.min(80,Math.floor(m.height*0.1));if(m.slider_pos>n){var p=c();var l=p.height-m.height;$("html, body").animate({scrollTop:m.slider_pos+l},"fast")}}}})};var g=500;setInterval(a,g)});